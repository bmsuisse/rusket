[build]
rustflags = [
    # Remove the global PyO3 reference-pool and its associated synchronisation
    # cost on every Pythonâ†”Rust boundary crossing. Safe because all Py<T>
    # objects are dropped while attached to the interpreter in our code.
    "--cfg", "pyo3_disable_reference_pool",
    # Note: target-cpu=native is intentionally NOT set here because it causes
    # SIGILL crashes in build scripts (e.g. pyo3-build-config) on CI runners
    # whose CPU microarchitecture differs from the build machine. Add it locally
    # via RUSTFLAGS env var or a gitignored .cargo/config.local.toml if needed.
]
